<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Globally Distributed WebAssembly Applications with wasmCloud and NATS | wasmCloud</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wasmcloud.com/blog/globally_distributed_webassembly_applications_with_wasmcloud_and_nats"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Globally Distributed WebAssembly Applications with wasmCloud and NATS | wasmCloud"><meta data-rh="true" name="description" content="Taking a wasmCloud lattice from local to globally distributed with NATS and NGS"><meta data-rh="true" property="og:description" content="Taking a wasmCloud lattice from local to globally distributed with NATS and NGS"><meta data-rh="true" property="og:image" content="https://wasmcloud.com/img/ngs-global.png"><meta data-rh="true" name="twitter:image" content="https://wasmcloud.com/img/ngs-global.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-10-18T13:00:00.000Z"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wasmcloud.com/blog/globally_distributed_webassembly_applications_with_wasmcloud_and_nats"><link data-rh="true" rel="alternate" href="https://wasmcloud.com/blog/globally_distributed_webassembly_applications_with_wasmcloud_and_nats" hreflang="en"><link data-rh="true" rel="alternate" href="https://wasmcloud.com/blog/globally_distributed_webassembly_applications_with_wasmcloud_and_nats" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="wasmCloud RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="wasmCloud Atom Feed">




<link rel="alternate" type="application/rss+xml" href="/community/rss.xml" title="wasmCloud RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/community/atom.xml" title="wasmCloud Atom Feed"><link rel="stylesheet" href="/assets/css/styles.17e61a64.css">
<link rel="preload" href="/assets/js/runtime~main.f36a1cdc.js" as="script">
<link rel="preload" href="/assets/js/main.57f130ad.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/wasmcloud_green.svg" alt="wasmCloud Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/wasmcloud_green.svg" alt="wasmCloud Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">wasmCloud</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wasmcloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/globally_distributed_webassembly_applications_with_wasmcloud_and_nats">Globally Distributed WebAssembly Applications with wasmCloud and NATS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/balancing_nfr_coupling">Using Capabilities to Decouple Non-Functional Requirements</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/road_to_ubiquity">WebAssembly and the Road to Ubiquity</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/wasmcloud_third_anniversary">Reflections on Three Years of wasmCloud</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/webassembly_components_and_wasmcloud_actors_a_glimpse_of_the_future">WebAssembly Components and wasmCloud Actors: A Glimpse of the Future</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/example_creating_webassembly_actor_in_go_with_tinygo">Building Portable, Scalable Components with TinyGo and wasmCloud</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/caps_are_effects">wasmCloud Capabilities are Managed Algebraic Effects for WebAssembly Functions</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-05-23_ghcr-actions">Deploying wasmCloud Actors from Github Packages</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://wasmcloud.com/img/ngs-global.png"><header><h1 class="title_f1Hy" itemprop="headline">Globally Distributed WebAssembly Applications with wasmCloud and NATS</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-10-18T13:00:00.000Z" itemprop="datePublished">October 18, 2022</time> ¬∑ <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Brooks Townsend</span></div></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="ngs-global" src="/assets/images/ngs-global-16f3079f19b6b44694b379284e215b8f.png" width="1118" height="922" class="img_ev3q"></p><p>The first claim we make about wasmCloud on our documentation site is: &quot;wasmCloud is a distributed platform...&quot; The best definition I could find, on <a href="https://en.wikipedia.org/wiki/Distributed_computing" target="_blank" rel="noopener noreferrer">Wikipedia</a> of course, is:</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Distributed computing is a field of computer science that studies distributed systems. A distributed system is a system whose components are located on different networked computers, which communicate and coordinate their actions by passing messages to one another from any system.</p></div></div><p>So, by the definition, as soon as we got two WebAssembly modules talking to each other on different networked computers we had a distributed system. Of course, we didn&#x27;t stop there, and today we&#x27;re going to walk through how you can run a global wasmCloud <a href="https://wasmcloud.dev/reference/lattice/" target="_blank" rel="noopener noreferrer">lattice</a> using NATS and NGS.</p><h1>How we got to NATS</h1><p>Back in the 0.18.0 days of wasmCloud we supported local host process calls which allowed developers to avoid installing NATS. Now, all wasmCloud hosts run atop NATS as a networking infrastructure that we call a <a href="https://wasmcloud.dev/reference/lattice/" target="_blank" rel="noopener noreferrer">lattice</a>. We&#x27;ve taken a stance <em>&quot;compatible with, but not dependent upon&quot;</em> for as much as possible (Kubernetes, Docker, bare metal, IoT, nomad) so this is a significant choice, and today you&#x27;ll see the reasons why.</p><p>We&#x27;re going to do a brief introduction on the power of NATS, talk about how wasmCloud uses it, and then get into configuring it to connect wasmCloud compute anywhere.</p><h1>NATS, Leaf Nodes, and NGS</h1><p><a href="https://nats.io/" target="_blank" rel="noopener noreferrer">NATS</a> describes itself as &quot;Connective Technology for Adaptive Edge &amp; Distributed Systems&quot;, which does as good of a job as you can to describe such a far-reaching technology. At its base level, NATS enables pub-sub and request-reply messaging on <a href="https://docs.nats.io/nats-concepts/subjects" target="_blank" rel="noopener noreferrer">subjects</a>. You run the NATS server binary, then connect clients to it over a TCP socket <sup id="fnref-1-91159d"><a href="#fn-1-91159d" class="footnote-ref">1</a></sup> and can publish messages to any other client subscribed on a the same subject. NATS also includes an optional distributed persistence system called <a href="https://docs.nats.io/nats-concepts/jetstream" target="_blank" rel="noopener noreferrer">Jetstream</a> and a fully-featured authn/authz <a href="https://docs.nats.io/nats-concepts/security" target="_blank" rel="noopener noreferrer">security</a> system for additional reliability and configuration. There are plenty of features that NATS offers that are out of scope for this guide, but the NATS <a href="https://docs.nats.io/" target="_blank" rel="noopener noreferrer">documentation</a> is a great place to find those. To sum it up, when you adopt NATS, you dramatically simplify your architecture and the number of tools you need to worry about.</p><p>A <a href="https://docs.nats.io/running-a-nats-service/configuration/leafnodes" target="_blank" rel="noopener noreferrer">Leaf Node</a> <em>extends</em> a centralized NATS infrastructure with a local NATS server, allowing you to perform additional authentication steps, route messages locally until they need to be delivered to the central infrastructure. This mechanism is not only efficient, it even allows messages to still flow during network disconnects by continuing to deliver messages locally without an upstream connection. We&#x27;ll be using a Leaf Node today to extend <a href="https://synadia.com/ngs" target="_blank" rel="noopener noreferrer">NGS</a>, the NATS Global Service by <a href="https://synadia.com/" target="_blank" rel="noopener noreferrer">Synadia</a>, which is a NATS supercluster with connection points on the edge, providing low latency worldwide.</p><h1>wasmCloud and NATS</h1><p>wasmCloud uses NATS in a multitude of ways. To name a few:</p><ol><li>Request/reply messaging for remote procedure calls between actors and capability providers. Additionally this is used for the <a href="https://github.com/wasmCloud/control-interface-client/" target="_blank" rel="noopener noreferrer">control interface</a>, which allows for remote managing of actors, providers, and hosts via <a href="https://github.com/wasmCloud/wash" target="_blank" rel="noopener noreferrer">wash</a>.</li><li>Jetstream to persist link definitions and claims so that they are durable and automatically delivered to new wasmCloud hosts joining an existing lattice</li><li>Communication with a wasmCloud configuration service and the soon-to-come application deployment manager (<a href="https://github.com/wasmCloud/wadm" target="_blank" rel="noopener noreferrer">wadm</a>)</li></ol><h1>Gathering Prerequisites</h1><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>This post was updated on <strong>11 Oct 2022</strong> to include new conveniences like the <code>wash up</code> command. This requires at least <code>v0.12.0</code> and removes the need to install NATS or the wasmCloud host runtime manually.</p></div></div><p>This example requires a few prerequisites:</p><ul><li>The wasmCloud Shell, aka <code>wash</code>, from the wasmCloud <a href="https://wasmcloud.dev/overview/installation/" target="_blank" rel="noopener noreferrer">installation guide</a>. If you already have <code>wash</code> installed, use <code>wash --version</code> to ensure you have version <code>v0.12.0</code> or newer</li><li>NATS account credentials to access NGS (we&#x27;ll walk through this below)</li></ul><p>We&#x27;re also going to use a few files from the aptly named <a href="https://github.com/wasmCloud/examples/tree/main/ngs" target="_blank" rel="noopener noreferrer">ngs</a> folder in our examples repository to deploy a Wasm microservice (we call this an <a href="https://wasmcloud.dev/reference/host-runtime/actors/" target="_blank" rel="noopener noreferrer">actor</a>) that securely fetches a random image of a cat or a dog. Later on we&#x27;re going to use some files in this folder, you can either clone this repository or just copy and paste as we go along.</p><p>To help illustrate the architecture of our application, take a look at this diagram:</p><p><img loading="lazy" src="/assets/images/excalidraw-676279f6db4b0661c4c9cf6fc122854f.png" width="4207" height="1990" class="img_ev3q"></p><p>We&#x27;ll have wasmCloud running both locally and in the cloud (or just on another machine), and we&#x27;ll be spreading compute across these two wasmCloud hosts. Don&#x27;t worry, you won&#x27;t have to look up your local IP address or expose any ports, NATS makes distributed computing a breeze.</p><p>The first step will be to get yourself a set of NGS credentials. Navigate to <a href="https://app.ngs.global" target="_blank" rel="noopener noreferrer">https://app.ngs.global</a> and select &quot;Try It Out&quot; under <strong>Free</strong>.
<img loading="lazy" src="/assets/images/ngs-signup-31643717aa5659550bcfc0893db2427f.png" width="2776" height="1914" class="img_ev3q"></p><p>For simplicity, go ahead and name this account <code>wasmcloud</code> to keep it separate from any other NATS accounts you may create in the future.</p><p><img loading="lazy" src="/assets/images/ngs-account-0a7b46f21589b1c936418a2b234f60e8.png" width="2696" height="1046" class="img_ev3q"></p><p>Proceed through the dialogues to sign in through your email until you reach the <code>Subscription Successful</code> page (keep in mind this is completely free, and you can&#x27;t accidentally exceed your free tier limits). The last step in this process is to copy the <code>curl</code> command with your secret account key to install the NATS CLI and <code>nsc</code> to download your NGS credentials</p><p><img loading="lazy" src="/assets/images/ngs-curl-f0e3a3bf6e5f2d696c4c5d7dd19531c0.png" width="2656" height="784" class="img_ev3q"></p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>The 58 character key starting with <code>SA</code> is a secret (S) key for an account (A). You&#x27;ll want to avoid sharing this value on Twitter or anywhere else public.</p></div></div><p>Head back to your terminal and paste in that <code>curl</code> command. You&#x27;ll see some output regarding the NATS install process, but all you really need is the last couple of lines:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NATS Configuration Context </span><span class="token string" style="color:#e3116c">&quot;synadia_wasmcloud_default&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Description: synadia </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Synadia Communications Inc.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Server URLs: tls://connect.ngs.global</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Credentials: /Users/brooks/.nkeys/creds/synadia/wasmcloud/default.creds </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             Path: /Users/brooks/.config/nats/context/synadia_wasmcloud_default.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nats-install: All set</span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can see here where the <code>Credentials</code> file is stored, that&#x27;s what you&#x27;ll use to authenticate to NGS. Keep this path in mind as we&#x27;ll come back to it. You can do a quick request through the <code>nats</code> CLI to see that it&#x27;s all working:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ nats req ngs.echo </span><span class="token string" style="color:#e3116c">&#x27;Anyone out there?&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:30:10 Sending request on </span><span class="token string" style="color:#e3116c">&quot;ngs.echo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:30:10 Received with rtt </span><span class="token number" style="color:#36acaa">21</span><span class="token plain">.005416ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Ohio, US</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: </span><span class="token string" style="color:#e3116c">&quot;Anyone out there?&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Running DogsAndCats on your Local Machine</h1><p>Now that you have walked through the wasmCloud installation guide and have valid NGS credentials, we&#x27;re ready to take wasmCloud global!</p><p>To start, let&#x27;s get NATS, wasmCloud, and the DogsAndCats example running on our local machine. This is what you can think of as the local development setup for wasmCloud but instead of using a standalone NATS server we&#x27;ll be using a leaf node that connects to NGS.</p><p>Go ahead and locate the <code>Credentials</code> file that you saw in the NGS install output to that directory as well. If you named your account <code>wasmcloud</code> like above, then it will be located under a folder called <code>.nkeys</code> in your <strong>HOME</strong> directory.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> ~/.nkeys/creds/synadia/wasmcloud/default.creds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----BEGIN NATS </span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain"> JWT-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eyJ0</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.elided</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------END NATS </span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain"> JWT------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">************************* IMPORTANT *************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NKEY Seed printed below can be used to sign and prove identity.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NKEYs are sensitive and should be treated as secrets.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----BEGIN </span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain"> NKEY SEED-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SU</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.elided</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------END </span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain"> NKEY SEED------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*************************************************************</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here, we&#x27;ll use <code>wash up</code> to launch a NATS leaf node connected over TLS to NGS and a wasmCloud host connected to that leaf node. We&#x27;re going to use the account credentials you just generated to authenticate, and the wasmCloud logs will print directly to the terminal. To do so, we can specify the NGS address as the remote URL and your account credentials as the NATS credsfile:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wash up --nats-remote-url tls://connect.ngs.global --nats-credsfile ~/.nkeys/creds/synadia/wasmcloud/default.creds</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see output like the following:</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">üèÉ Running in interactive mode, your host is running at http://localhost:4000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">üö™ Press `CTRL+c` at any time to exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.559 [info] Wrote &quot;./host_config.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.560 [info] Wrote &quot;/Users/brooks/.wash/host_config.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.560 [info] Connecting to control interface NATS without authentication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.560 [info] Connecting to lattice rpc NATS without authentication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.560 [info] Host NATWVDH3WZHYQQG3GFXPGRW5IAF5O4YCTMZ66LIM2WRSIVRDOTMIWN5Y (morning-moon-3881) started.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.560 [info] Valid cluster signers: CD263EGQIG4DKCZAYV6ZMDAX3LOV4PKEGNCZF2THIYONC7W4CAXELVZZ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.560 [warning] WARNING. You are using an ad hoc generated cluster seed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For any other host or CLI tool to communicate with this host,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">you MUST copy the following seed key and use it as the value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">of the WASMCLOUD_CLUSTER_SEED environment variable:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SCAGI4US72YWQT6TAJBCK77XSOAJMWI5PCG5MICC3FWNRFQLHE53BEZIFU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You must also ensure the following cluster signer is in the list of valid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">signers for any new host you start:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CD263EGQIG4DKCZAYV6ZMDAX3LOV4PKEGNCZF2THIYONC7W4CAXELVZZ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.564 [info] Started wasmCloud OTP Host Runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.566 [info] Running WasmcloudHostWeb.Endpoint with cowboy 2.9.0 at 0.0.0.0:4000 (http)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.567 [info] Access WasmcloudHostWeb.Endpoint at http://localhost:4000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.665 [info] Lattice cache stream created or verified as existing (0 consumers).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.665 [info] Attempting to create ephemeral consumer (cache loader)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:37:41.667 [info] Created ephemeral consumer for lattice cache loader</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From this command output, go ahead and save your 58 character cluster seed starting with <strong>SC</strong> (it will be different than the seed in the sample output above). We&#x27;re going to use it again later.</p><p>You now have a running wasmCloud host using NGS as the lattice infrastructure! Even though we&#x27;re connected to NGS, our leaf node is smart enough to always route traffic locally if possible, saving the overhead of a remote network hop. This is key for enabling wasmCloud to function even if you lose connectivity to NGS briefly, all actors and providers on a host will continue as if nothing happened.</p><p>We can continue by deploying our ngs application from the examples repository which consists of: our DogsAndCats actor, a capability provider that implements the <code>wasmcloud:httpserver</code> contract and a capability provider that implements the <code>wasmcloud:httpclient</code> contract, both of which we provide as wasmCloud first-party providers but could be swapped to any other implementation at runtime.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wash ctl start actor wasmcloud.azurecr.io/dogs-and-cats:0.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wash ctl </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> put MCUCZ7KMLQBRRWAREIBQKTJ64MMQ5YKEGTCRGPPV47N4R72W2SU3EYMU VAG3QITQQ2ODAOWB5TTQSDJ53XK3SHBEIFNK4AYJ5RKAX2UNSCAPHA5M wasmcloud:httpserver </span><span class="token assign-left variable" style="color:#36acaa">ADDRESS</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:8081</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wash ctl </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> put MCUCZ7KMLQBRRWAREIBQKTJ64MMQ5YKEGTCRGPPV47N4R72W2SU3EYMU VCCVLH4XWGI3SGARFNYKYT2A32SUYA2KVAIV2U2Q34DQA7WWJPFRKIKM wasmcloud:httpclient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wash ctl start provider wasmcloud.azurecr.io/httpserver:0.15.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wash ctl start provider wasmcloud.azurecr.io/httpclient:0.4.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once everything completes, check out a pet picture at <a href="http://127.0.0.1:8081" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8081</a>! You can refresh to your heart&#x27;s desire to see pictures of cats and dogs, and you&#x27;ve deployed your application on wasmCloud.</p><h1>Turning the Knob from Local to Global</h1><p>For this step you&#x27;re going to need another computer. This can be a Cloud VM, a Docker container, or even your friends laptop. The architecture can be x86_64 or aarch64, and the operating system can be Macos, Windows, or Linux. The instructions are all the same regardless of your choice (thanks WebAssembly!) For today, I chose to do this on a Google Cloud Platform e2 micro instance which is included in their <a href="https://cloud.google.com/free" target="_blank" rel="noopener noreferrer">free</a> tier.</p><p>You&#x27;ll want to get terminal access to to your new machine and then follow the wasmCloud <a href="https://wasmcloud.dev/overview/installation/" target="_blank" rel="noopener noreferrer">installation guide</a> <code>wash</code> as you did before. You&#x27;ll need a few pieces of information to ensure this host can properly join your lattice:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="defaultcreds"><strong>default.creds</strong><a class="hash-link" href="#defaultcreds" title="Direct link to heading">‚Äã</a></h3><p>This is the same set of credentials you used in the previous step, located under <code>~/.nkeys/creds/synadia/wasmcloud/default.creds</code> if your account name is <code>wasmcloud</code>. The values contained inside of the credsfile can be supplied manually to connect, but for simplicity we recommend just copying it over to your second machine.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-seed"><strong>Cluster Seed</strong><a class="hash-link" href="#cluster-seed" title="Direct link to heading">‚Äã</a></h3><p>wasmCloud uses a cluster seed to sign and verify each invocation (e.g. <code>HttpServer.HandleRequest</code>) in wasmCloud. This is a part of wasmCloud&#x27;s <a href="https://wasmcloud.dev/app-dev/secure/clusterkeys/" target="_blank" rel="noopener noreferrer">zero-trust security model</a> and any invocations that aren&#x27;t signed with a verified issuer (e.g. from an unknown host) will be denied before it even reaches the actor /¬†provider. This can be found in the output of your <code>wash up</code> command that you ran earlier as the 58 character seed starting with <strong>SC</strong>.</p><p>Other than that, both hosts will use the default values from <code>wash up</code> like the JetStream domain (core) and lattice prefix (default). You can run the following command to launch your second host, which specifies a label, the cluster seed, and a separate JetStream domain for the <em>leaf node</em> to allow your locally launched host to remain as the &quot;primary&quot; node:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">HOST_machine</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">second wash up --nats-remote-url tls://connect.ngs.global --nats-credsfile ./default.creds --cluster-seed SCAGI4US72YWQT6TAJBCK77XSOAJMWI5PCG5MICC3FWNRFQLHE53BEZIFU --nats-js-domain extender --wasmcloud-js-domain core</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see a similar dump of logs, but notably you should see that you are connecting to a stream with one consumer (your local machine)</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">16:06:22.896 [info] Lattice cache stream created or verified as existing (1 consumers).</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And now, on your local machine, check out <a href="http://localhost:4000" target="_blank" rel="noopener noreferrer">http://localhost:4000</a>. You should see your DogsAndCats resources and additionally under your <strong>Host Info</strong> section you&#x27;ll see two hosts:</p><p><img loading="lazy" src="/assets/images/dashboard-6519c170e4863ee456cc974a303b01ae.png" width="2514" height="1222" class="img_ev3q"></p><p>We can go ahead and schedule a few extra replicas of the DogsAndCats actor on the cloud host and an HTTPClient provider using <code>wash</code> or by using the dashboard. These commands can be run with <code>wash</code> on either machine, the result is the same!</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># The constraint flag ensures we start on a host with that label</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wash ctl start actor wasmcloud.azurecr.io/dogs-and-cats:0.1.0 --constraint </span><span class="token assign-left variable" style="color:#36acaa">machine</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">second</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wash ctl start provider wasmcloud.azurecr.io/httpclient:0.4.0 --constraint </span><span class="token assign-left variable" style="color:#36acaa">machine</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">second</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We&#x27;ve now transformed this app from running as a monolith to running distributed across two machines, with resources running both local and in the cloud. You can even remove the DogsAndCats actor from your local machine and everything will immediately failover to the cloud.</p><h1>Wrapping up</h1><p>In this guide we used NGS and NATS Leaf Nodes to connect two wasmCloud hosts; one running locally and one running in the cloud. This guide demonstrated how you can run multiple instances of actors and different capability providers <em>anywhere</em> and how you, the developer, don&#x27;t need to change your business logic to make this happen. We&#x27;re all about making our developer experience world-class, and that means zero code changes from local development to running across different clouds with highly distributed infrastructure. To drive this home, here&#x27;s few things that you didn&#x27;t have to deal with today: IP addresses, security group rules, load balancing requests, failover logic, NATS cluster setup, configuring TLS communications, and of course recompiling for different architectures /¬†operating systems. All of those are taken care of by the NATS and wasmCloud.</p><p>We used the NGS free tier to simplify the infrastructure setup, though it&#x27;s worth noting that NGS is not a required component of this architecture. You can replace NGS with any NATS <a href="https://docs.nats.io/running-a-nats-service/configuration/clustering" target="_blank" rel="noopener noreferrer">cluster</a> and the result is the same, there&#x27;s no required cost to connect more than two hosts together.</p><p>If you&#x27;d like to see the next level of this NGS + Leaf Node setup with wasmCloud, check out <a href="https://www.youtube.com/watch?v=wjwKmq16shI" target="_blank" rel="noopener noreferrer">Disrupting the Downtime Continuum</a> the talk Taylor and I gave last KubeCon EU where we used these instructions with one more leaf node and demonstrated live fail over between clouds with wasmCloud.</p><p>We&#x27;re looking forward to seeing what you can do with this guide! If you give this a try and do something awesome or need any assistance, join our community <a href="https://slack.wasmcloud.com/" target="_blank" rel="noopener noreferrer">Slack</a> or open an issue on our wasmCloud <a href="https://github.com/wasmCloud/wasmCloud" target="_blank" rel="noopener noreferrer">repository</a>.</p><div class="footnotes"><hr><ol><li id="fn-1-91159d">NATS also accepts <a href="https://docs.nats.io/nats-concepts/connectivity" target="_blank" rel="noopener noreferrer">connections</a> over TLS, WebSockets, and MQTT<a href="#fnref-1-91159d" class="footnote-backref">‚Ü©</a></li></ol></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/balancing_nfr_coupling"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Using Capabilities to Decouple Non-Functional Requirements</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#defaultcreds" class="table-of-contents__link toc-highlight"><strong>default.creds</strong></a></li><li><a href="#cluster-seed" class="table-of-contents__link toc-highlight"><strong>Cluster Seed</strong></a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/wasmcloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://slack.wasmcloud.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://calendar.google.com/calendar/u/0/embed?src=c_6cm5hud8evuns4pe5ggu3h9qrs@group.calendar.google.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Calendar &amp; wasmCloud Wednesdays<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/community">Community Meeting Notes</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social &amp; More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/wasmcloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/wasmCloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/privacy-policy">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" href="/terms-conditions">Terms and Conditions</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 wasmCloud LLC. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: https://www.linuxfoundation.org/trademark-usage. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f36a1cdc.js"></script>
<script src="/assets/js/main.57f130ad.js"></script>
</body>
</html>