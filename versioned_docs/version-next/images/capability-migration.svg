<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 740 620" fill="none">
  <style>
    text { font-family: system-ui, -apple-system, sans-serif; }
    .box { rx: 8; ry: 8; }
    .label { font-size: 14px; fill: #1a1a2e; font-weight: 600; }
    .sublabel { font-size: 11px; fill: #6b7280; }
    .arrow { stroke: #9ca3af; stroke-width: 1.5; marker-end: url(#ah); }
    .arrow-green { stroke: #00bc8e; stroke-width: 2; marker-end: url(#ah-green); }
    .arrow-red { stroke: #e03131; stroke-width: 1.5; marker-end: url(#ah-red); }
    .heading { font-size: 20px; fill: #3b82f6; font-weight: 700; }
    .subheading { font-size: 15px; fill: #3b82f6; font-weight: 600; }
    .col-head { font-size: 15px; font-weight: 700; }
    .desc { font-size: 11px; fill: #6b7280; }
    .badge { font-size: 10px; fill: #00bc8e; font-weight: 700; }
    .perf { font-size: 16px; font-weight: 700; }
  </style>
  <defs>
    <marker id="ah" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#9ca3af"/>
    </marker>
    <marker id="ah-green" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#00bc8e"/>
    </marker>
    <marker id="ah-red" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#e03131"/>
    </marker>
  </defs>

  <!-- Title -->
  <text class="heading" x="370" y="28" text-anchor="middle">Capability Provider Migration Paths</text>

  <!-- Column headers -->
  <text class="col-head" x="100" y="65" text-anchor="middle" fill="#e03131">wasmCloud v1</text>
  <text class="col-head" x="410" y="65" text-anchor="middle" fill="#00bc8e">wasmCloud v2</text>

  <!-- v1 Provider box -->
  <rect class="box" x="15" y="82" width="175" height="52" fill="#ffe6e6" stroke="#e03131" stroke-width="1.5"/>
  <text class="label" x="102" y="104" text-anchor="middle">Capability Provider</text>
  <text class="sublabel" x="102" y="120" text-anchor="middle">External Process</text>

  <!-- Option 1: Host Plugin (recommended) - horizontal arrow -->
  <text class="badge" x="250" y="88" text-anchor="middle">recommended</text>
  <line class="arrow-green" x1="192" y1="97" x2="308" y2="97"/>

  <rect class="box" x="310" y="78" width="180" height="40" fill="#e6f9f3" stroke="#00bc8e" stroke-width="1.5"/>
  <text class="label" x="400" y="102" text-anchor="middle">Host Plugin</text>

  <text class="desc" x="510" y="88">Best for: shared, performance-critical</text>
  <text class="desc" x="510" y="102">capabilities (HTTP, KV, config).</text>
  <text class="desc" x="510" y="116">Built into the host; serves many workloads.</text>

  <!-- Option 2: Service Component - route down then right to avoid crossing Option 1 -->
  <polyline class="arrow" points="102,134 102,158 308,158" fill="none"/>

  <rect class="box" x="310" y="138" width="180" height="40" fill="#e0f5f0" stroke="#099268" stroke-width="1.5"/>
  <text class="label" x="400" y="162" text-anchor="middle">Service Component</text>

  <text class="desc" x="510" y="148">Best for: workload-specific long-running</text>
  <text class="desc" x="510" y="162">functionality (cron, caches,</text>
  <text class="desc" x="510" y="176">connection pools).</text>

  <!-- Option 3: Containerized Provider - route down then right -->
  <polyline class="arrow" points="102,134 102,218 308,218" fill="none"/>

  <rect class="box" x="310" y="200" width="180" height="40" fill="#e6f0f7" stroke="#005799" stroke-width="1.5"/>
  <text class="label" x="400" y="224" text-anchor="middle">Containerized Provider</text>

  <text class="desc" x="510" y="210">Best for: existing provider code that</text>
  <text class="desc" x="510" y="224">needs minimal changes.</text>
  <text class="desc" x="510" y="238">Runs outside wasmCloud.</text>

  <!-- Divider -->
  <line x1="20" y1="280" x2="720" y2="280" stroke="#e5e7eb" stroke-width="1"/>

  <!-- Performance Comparison -->
  <text class="subheading" x="370" y="310" text-anchor="middle">Performance Comparison</text>

  <!-- v1 side -->
  <text class="col-head" x="140" y="345" text-anchor="middle" fill="#e03131">v1: Provider Architecture</text>

  <rect class="box" x="80" y="365" width="120" height="40" fill="#e6f9f3" stroke="#00bc8e" stroke-width="1.5"/>
  <text class="label" x="140" y="389" text-anchor="middle">Actor</text>

  <text class="desc" x="155" y="425" fill="#e03131">network hop</text>
  <line class="arrow-red" x1="140" y1="405" x2="140" y2="438"/>

  <rect class="box" x="65" y="440" width="150" height="36" fill="#e6f0f7" stroke="#005799" stroke-width="1.5"/>
  <text class="label" x="140" y="462" text-anchor="middle">NATS Lattice</text>

  <text class="desc" x="155" y="500" fill="#e03131">network hop</text>
  <line class="arrow-red" x1="140" y1="476" x2="140" y2="512"/>

  <rect class="box" x="65" y="514" width="150" height="40" fill="#ffe6e6" stroke="#e03131" stroke-width="1.5"/>
  <text class="label" x="140" y="538" text-anchor="middle">Provider Process</text>

  <text class="perf" x="140" y="580" text-anchor="middle" fill="#e03131">~5,000 RPS</text>

  <!-- v2 side -->
  <text class="col-head" x="530" y="345" text-anchor="middle" fill="#00bc8e">v2: Plugin Architecture</text>

  <rect class="box" x="470" y="365" width="120" height="40" fill="#e6f9f3" stroke="#00bc8e" stroke-width="1.5"/>
  <text class="label" x="530" y="389" text-anchor="middle">Component</text>

  <text class="desc" x="545" y="430" fill="#00bc8e">in-process call</text>
  <line class="arrow-green" x1="530" y1="405" x2="530" y2="448"/>

  <rect class="box" x="455" y="450" width="150" height="40" fill="#e6ecf3" stroke="#002e5d" stroke-width="1.5"/>
  <text class="label" x="530" y="474" text-anchor="middle">Host + Plugin</text>

  <text class="perf" x="530" y="520" text-anchor="middle" fill="#00bc8e">~30,000 RPS</text>
  <text class="sublabel" x="530" y="540" text-anchor="middle">6x faster (no network hop)</text>
</svg>
